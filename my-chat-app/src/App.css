/* App.css */
/* theme variables */
:root {
  --primary-color:  #4f46e5; --primary-hover: #4338ca;
  --user-bubble:    #4f46e5; --user-text:    #fff;
  --ai-bubble:      #f3f4f6; --ai-text:      #111827;
  --bg-main:        #f9fafb; --bg-chat:      #fff;
  --text-primary:   #111827; --text-secondary:#6b7280;
  --border-color:   #e5e7eb; --input-bg:     #f9fafb;
  --shadow-sm:      0 1px 2px rgba(0,0,0,0.05);
  --radius-md:      12px;    --header-height:64px;
  --footer-height:  80px;
}
[data-theme="dark"] {
  --primary-color:  #6366f1; --primary-hover:#818cf8;
  --user-bubble:    #6366f1; --user-text:    #fff;
  --ai-bubble:      #2a2a2a; --ai-text:      #e5e7eb;
  --bg-main:        #111827; --bg-chat:      #1f2937;
  --text-primary:   #f9fafb; --border-color: #374151;
  --input-bg:       #374151; --shadow-sm:    0 1px 2px rgba(0,0,0,0.3);
}

/* reset & layout */
* { box-sizing:border-box; margin:0; padding:0; }
html, body {
  width:100%; height:100%; font-family:'Inter',sans-serif;
  background:var(--bg-main); color:var(--text-primary);
  overflow:hidden;
}

/* container */
.chat-container {
  display:flex; flex-direction:column;
  width:100vw; height:100vh; background:var(--bg-chat);
}

/* header */
.chat-header {
  display:flex; align-items:center; justify-content:space-between;
  height:var(--header-height); padding:0 1.5rem;
  border-bottom:1px solid var(--border-color);
}
.header-controls { display:flex; gap:0.5rem; }
.theme-toggle,
.search-toggle {
  width:40px; height:40px; border:none; border-radius:50%;
  background:var(--input-bg); cursor:pointer;
  display:flex; align-items:center; justify-content:center;
  transition:background .2s, color .2s;
  color: var(--text-primary);
}

/* THIS IS THE FIX: force any icon SVG to inherit its parent's color/size */
.theme-toggle svg,
.search-toggle svg,
.send-button svg {
  display: block;
  width: 1.25em;
  height: 1.25em;
  fill: currentColor;
}

.search-toggle.active {
  background:var(--primary-color); color:#fff;
}

/* messages */
.message-list {
  flex:1; overflow-y:auto; padding:1.5rem;
  display:flex; flex-direction:column; gap:1.5rem;
}
.message {
  max-width:85%; padding:1rem 1.25rem;
  border-radius:var(--radius-md); box-shadow:var(--shadow-sm);
  word-break:break-word; animation:fadeInUp .3s;
}
.message.user {
  margin-left:auto; background:var(--user-bubble); color:var(--user-text);
  border-bottom-right-radius:0;
}
.message.ai {
  margin-right:auto; background:var(--ai-bubble); color:var(--ai-text);
  border-bottom-left-radius:0;
}
.sender-label { font-size:.8rem; opacity:.8; margin-bottom:.5rem; }

/* markdown & code */
.message-text { line-height:1.6; white-space:pre-wrap; }
.inline-code {
  background:rgba(0,0,0,0.05); padding:.2em .4em; border-radius:4px;
}
.code-wrapper { margin:1rem 0; border-radius:8px; overflow:hidden; }
.code-header {
  display:flex; justify-content:space-between; align-items:center;
  padding:.5rem; background:var(--input-bg); font-size:.8rem;
}
.copy-button { background:rgba(255,255,255,0.1); border:none;
  padding:.3em .6em; cursor:pointer; }

/* loading */
.loading-indicator {
  position:absolute; bottom:var(--footer-height); left:1.5rem;
  display:flex; align-items:center; gap:.5rem;
  background:var(--ai-bubble); padding:.5rem 1rem;
  border-radius:var(--radius-md); box-shadow:var(--shadow-sm);
}

/* form & input */
.message-form {
  display:flex; align-items:center; padding:1rem 1.5rem;
  border-top:1px solid var(--border-color); background:var(--bg-chat);
}
.message-form input {
  flex:1; padding:.9rem 1.2rem;
  border:1px solid var(--border-color);
  border-radius:28px; background:var(--input-bg);
  color:var(--text-primary);
}
.message-form input::placeholder { color:var(--text-secondary); }
.message-form input:disabled    { color:var(--text-secondary); }

.send-button,
.stop-button {
  width:46px; height:46px; margin-left:.75rem;
  border:none; border-radius:50%; cursor:pointer;
  display:flex; align-items:center; justify-content:center;
  font-size:1.2rem; transition:background .2s, transform .2s;
}
.send-button {
  background:var(--primary-color); color:#fff;
}
.send-button:disabled {
  background:rgba(79,70,229,0.5); cursor:not-allowed;
}
.stop-button { background:#ef4444; color:#fff; }

/* animations */
@keyframes fadeInUp {
  from { opacity:0; transform:translateY(10px); }
  to   { opacity:1; transform:translateY(0); }
}

/* responsive tweaks */
@media (max-width:768px) {
  .chat-header h1 { font-size:1rem; }
  .message-list { padding:1rem; }
  .message { max-width:90%; padding:.75rem 1rem; }
  .message-form { padding:.75rem 1rem; }
}
